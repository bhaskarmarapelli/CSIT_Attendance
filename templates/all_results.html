<!DOCTYPE html>
<html>
<head>
    <title>All Student Reports</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}

.report {
    border: 1px solid #ccc;
    padding: 20px;
    margin-bottom: 30px;
    position: relative;
}

.header-section {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    height: 25vh;
    background-color: #f8f9fa;
    border-bottom: 2px solid #007bff;
    position: relative;
    padding: 10px;
    box-sizing: border-box;
}

.logo-box {
    grid-column: 2;
    display: flex;
    justify-content: center;
    align-items: center;
}

.logo-box img {
    max-height: 100px;
    max-width: 180px;
    border-radius: 10px;
    box-shadow: 0 5px 10px rgba(0,0,0,0.2);
}

.address-box, .address-box1 {
    background-color: #f9f9f9;
    border: 1px solid #999;
    padding: 10px;
    font-size: 14px;
    width: 250px;
}

.address-box {
    grid-column: 1;
    justify-self: start;
}

.address-box1 {
    grid-column: 3;
    justify-self: end;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

th, td {
    border: 1px solid #999;
    padding: 8px;
    text-align: left;
}

th {
    background-color: #f2f2f2;
}

.footer {
    margin-top: 20px;
    padding: 10px;
    background-color: #dee2e6;
    text-align: center;
    font-size: 0.70em;
    border-top: 2px solid #007bff;
}

@media print {
    body {
        counter-reset: page;
    }

    .report::after {
        content: "Page " counter(page);
        counter-increment: page;
        position: absolute;
        bottom: 10px;
        right: 20px;
        font-size: 10px;
        color: #333;
    }

    .page-break {
        page-break-before: always;
    }
}
</style>

</head>
<body>
    <h1>All Student Reports</h1>
    {% for student in all_students %}
        <div class="report page-break">


<div class="header-section">
    <div class="address-box">
        <strong>To:</strong><br>
        {{ student.fathername }}<br>
        {{ student.Postal_Address }}<br>
        <strong>Phone:</strong><br>
        {{ student.phone }}
    </div>

    <div class="logo-box">
        <img src="/static/csit_logo.png" alt="CSIT Department Logo">
    </div>

    <div class="address-box1">
        <strong>From:</strong><br>
        {{ student.councelorname }}<br>
        <strong>Phone:</strong><br>
        {{ student.councelorcontact | int }}<br>
        <strong>Department of CSIT, KL Deemed to be university</strong><br>
    </div>
</div>


            <h2>{{ student.name }} (ID: {{ student.student_id }})</h2>
           <table>
    <thead>
      <tr>
        <th>Student Name</th>
        <th>Counselor</th>
        <th>CGPA</th>
        <th>Backlogs</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>{{ student.name }}</td>
        <td>{{ student.councelorname }} - {{ student.councelorcontact | int }}</td>
        <td>{{ student.cgpa }}</td>
        <td>{{ student.backlogs | int }}</td>
      </tr>
    </tbody>
  </table>
                  <h3>Courses</h3>
            <table>
                <thead>
                    <tr>
                        <th>Course Code</th>
                        <th>Course Name</th>
                        <th>Classes Conducted</th>
                        <th>Classes Attended</th>
                        <th>Attendance %</th>
                    </tr>
                </thead>
                <tbody>
                    {% for course in student.courses %}
                    <tr>
                        <td>{{ course.coursecode }}</td>
                        <td>{{ course.coursename }}</td>
                        <td>{{ course.totalclassesconducted }}</td>
                        <td>{{ course.totalclassesattended }}</td>
                        <td>{{ course.attendance_percentage }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>


             <div class="footer">
      <span>Dr Bhaskar Marapelli, Department of CSIT</span>, KLEF Deemed to be University,
Green Fields, Vaddeswaram,
Guntur District, A.P., INDIA.
Pincode : 522 302.
    </div>
        </div>
    {% endfor %}
</body>
</html>
