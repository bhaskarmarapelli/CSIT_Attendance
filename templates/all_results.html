<!DOCTYPE html>
<html>
<head>
    <title>All Student Reports</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}

.report {
    border: 1px solid #ccc;
    padding: 10px;
    margin-bottom: 20px;
    position: relative;
    page-break-after: always;
    box-sizing: border-box;
}

.header-section {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    background-color: #f8f9fa;
    border-bottom: 1px solid #007bff;
    padding: 5px;
    box-sizing: border-box;
}

.logo-box {
    grid-column: 2;
    display: flex;
    justify-content: center;
    align-items: center;
}

.logo-box img {
    max-height: 60px;
    max-width: 120px;
    border-radius: 8px;
    box-shadow: 0 3px 6px rgba(0,0,0,0.2);
}

.address-box, .address-box1 {
    background-color: #f9f9f9;
    border: 1px solid #999;
    padding: 6px;
    font-size: 12px;
    width: 200px;
}

.address-box {
    grid-column: 1;
    justify-self: start;
}

.address-box1 {
    grid-column: 3;
    justify-self: end;
}

h1 {
    font-size: 18px;
    text-align: center;
    margin: 10px 0;
}

h2 {
    font-size: 16px;
    margin-top: 10px;
}

h5 {
    font-size: 14px;
    margin-top: 10px;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 5px;
    font-size: 12px;
}

th, td {
    border: 1px solid #999;
    padding: 6px;
    text-align: left;
}

th {
    background-color: #f2f2f2;
}

.message p {
    font-size: 12px;
    margin: 10px 0;
}

.footer {
    margin-top: 10px;
    padding: 6px;
    background-color: #dee2e6;
    text-align: center;
    font-size: 10px;
    border-top: 1px solid #007bff;
}

@media print {
     body {
        margin: 0;
        padding: 0;
        counter-reset: page;
    }

    .report {
        page-break-after: always;
        break-inside: avoid;
        height: 100vh;
        overflow: hidden;
    }

    .header-section {
        height: 33vh; /* Ensures it takes up roughly 1/3 of the printed page */
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        align-items: center;
        background-color: #f8f9fa;
        border-bottom: 1px solid #007bff;
        padding: 10px;
        box-sizing: border-box;
    }

    .logo-box img {
        max-height: 60px;
        max-width: 120px;
    }

    .address-box, .address-box1 {
        font-size: 12px;
        padding: 6px;
        width: 200px;
    }

    .report::after {
        content: "Page " counter(page);
        counter-increment: page;
        position: absolute;
        bottom: 5px;
        right: 10px;
        font-size: 10px;
        color: #333;
    }

    h1 {
        display: none;
    }

}
</style>

</head>
<body>
    <h1>All Student Reports</h1>
    {% for student in all_students %}
        <div class="report page-break">


<div class="header-section">
    <div class="address-box">
        <strong>To:</strong><br>
        {{ student.fathername }}<br>
        {{ student.Postal_Address }}<br>
        <strong>Phone:</strong><br>
        {{ student.phone }}
    </div>

    <div class="logo-box">
        <img src="/static/csit_logo.png" alt="CSIT Department Logo">
    </div>

    <div class="address-box1">
        <strong>From:</strong><br>
        {{ student.councelorname }}<br>
        <strong>Phone:</strong><br>
        {{ student.councelorcontact | int }}<br>
        <strong>Department of CSIT, KL Deemed to be university</strong><br>
    </div>
</div>


            <h2>{{ student.name }} (ID: {{ student.student_id }})</h2>
           <table>
    <thead>
      <tr>
        <th>Student Name</th>
        <th>Counselor</th>
        <th>CGPA</th>
        <th>Backlogs</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>{{ student.name }}</td>
        <td>{{ student.councelorname }} - {{ student.councelorcontact | int }}</td>
        <td>{{ student.cgpa }}</td>
        <td>{{ student.backlogs | int }}</td>
      </tr>
    </tbody>
  </table>
             <div class="message">
   <p>Dear Parent,<br>
    Please find the attendance of your Son/Daughter. The students who have less than 85% attendance in any subject shall not be allowed for final exams. So instruct your son/Daughter to attend regularly and maintain minimum 85% attendance in all subjects.<br>
‡∞™‡±ç‡∞∞‡∞ø‡∞Ø‡∞Æ‡±à‡∞® ‡∞§‡∞≤‡±ç‡∞≤‡∞ø‡∞¶‡∞Ç‡∞°‡±ç‡∞∞‡±Å‡∞≤‡∞æ‡∞∞‡∞æ,<br>
     ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Æ‡±Ä ‡∞ï‡±ä‡∞°‡±Å‡∞ï‡±Å/‡∞ï‡±Ç‡∞§‡±Å‡∞∞‡∞ø ‡∞π‡∞æ‡∞ú‡∞∞‡±Å ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡∞®‡±Å ‡∞ï‡∞®‡±Å‡∞ï‡±ç‡∞ï‡±ã‡∞Ç‡∞°‡∞ø. ‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞∏‡∞¨‡±ç‡∞ú‡±Ü‡∞ï‡±ç‡∞ü‡±Å‡∞≤‡±ã 85% ‡∞ï‡∞Ç‡∞ü‡±á ‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞π‡∞æ‡∞ú‡∞∞‡±Å ‡∞â‡∞®‡±ç‡∞® ‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ‡∞∞‡±ç‡∞•‡±Å‡∞≤‡∞®‡±Å ‡∞´‡±à‡∞®‡∞≤‡±ç ‡∞™‡∞∞‡±Ä‡∞ï‡±ç‡∞∑‡∞≤‡∞ï‡±Å ‡∞Ö‡∞®‡±Å‡∞Æ‡∞§‡∞ø‡∞Ç‡∞ö‡∞∞‡±Å. ‡∞ï‡∞æ‡∞¨‡∞ü‡±ç‡∞ü‡∞ø ‡∞Æ‡±Ä ‡∞ï‡±ä‡∞°‡±Å‡∞ï‡±Å/‡∞ï‡±Ç‡∞§‡±Å‡∞∞‡±Å ‡∞ï‡±ç‡∞∞‡∞Æ‡∞Ç ‡∞§‡∞™‡±ç‡∞™‡∞ï‡±Å‡∞Ç‡∞°‡∞æ ‡∞π‡∞æ‡∞ú‡∞∞‡±Å ‡∞ï‡∞æ‡∞µ‡∞æ‡∞≤‡∞®‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞∏‡∞¨‡±ç‡∞ú‡±Ü‡∞ï‡±ç‡∞ü‡±Å‡∞≤‡∞≤‡±ã ‡∞ï‡∞®‡±Ä‡∞∏‡∞Ç 85% ‡∞π‡∞æ‡∞ú‡∞∞‡±Å‡∞®‡±Å ‡∞ï‡±ä‡∞®‡∞∏‡∞æ‡∞ó‡∞ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞®‡∞ø ‡∞∏‡±Ç‡∞ö‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.</p>
 </div>
                <h5>üìò Attendance Upto 31-7-2025</h5>
            <table>
                <thead>
                    <tr>
                        <th>Course Code</th>
                        <th>Course Name</th>
                        <th>Classes Conducted</th>
                        <th>Classes Attended</th>
                        <th>Attendance %</th>
                    </tr>
                </thead>
                <tbody>
                    {% for course in student.courses %}
                    <tr>
                        <td>{{ course.coursecode }}</td>
                        <td>{{ course.coursename }}</td>
                        <td>{{ course.totalclassesconducted }}</td>
                        <td>{{ course.totalclassesattended }}</td>
                        <td>{{ course.attendance_percentage }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>


             <div class="footer">
      <span>Dr Bhaskar Marapelli, Department of CSIT</span>, KLEF Deemed to be University,
Green Fields, Vaddeswaram,
Guntur District, A.P., INDIA.
Pincode : 522 302.
    </div>
        </div>
    {% endfor %}
</body>
</html>
